<header role="banner">
  <nav class="mobile-nav show-on-mobiles">
    {% include primary-nav-items.html %}
  </nav>
  <div class="grid">
    <div class="unit one-fifth center-on-mobiles">
      <h1>
        <a href="/">
          <span class="sr-only">Jekyll</span>
          <img src="{{site.baseurl}}/img/logo-2x.png" width="115" height="115" alt="Jekyll Logo">
        </a>
      </h1>
    </div>
    <nav class="main-nav unit four-fifths hide-on-mobiles">
      {% include primary-nav-items.html %}
    </nav>
  </div>
</header>

<script src="{{site.baseurl}}/js/jquery.js"></script>
<script src="{{site.baseurl}}/js/lunr.min.js"></script>
<script src="{{site.baseurl}}/search.js"></script>
<script>
$(function() {
  $("#query_btn").click(function()
  {
    search();
  });
  $("#query_input").keypress(function(e) {
    if(e.which == 13) {
      e.preventDefault();
      search();
    }
    
  });

  $("#query_input").change(function(e) {
    
    if($("#query_input").val()=="")
    {
      $("#query_result").html("");
      return ;
    }
  });
  
})
function search() {
  if($("#query_input").val()=="")
    {
      $("#query_result").html("");
      return ;
  }
  var result = idx.search($("#query_input").val());
  if(result && result.length > 0) {
    var result_str="";
    for(var i=0;i<result.length;i++)
    {
      id=result[i].ref;
      doc=docs.filter(function(q){return q.id===id})[0];
      title=doc['title'].substr(0,40);
      content=doc["content"].substr(0,40);
      result_str+=
      "<p class=\"line\">"+
          "<span class=\"path\"><a href=\""+id+"\" target=\"_blank\">"+title+"</a></span>"+
          "<span class=\"prompt\">$:</span>"+
          "<span class=\"command\">"+content+"</span>"+
      "</p>";
      // result_str+="<li>"+id+"</li>\n";
      // result_str+="<p class=\"line\">"+id+"<span>"++"</span></li>\n";
    }
    // alert(result_str);
    //show the search result
    $("#query_result").html(result_str);
 
  } else {
    result_str = 
      "<p class=\"line\">"+
          "<span class=\"path\">Result</span>"+
          "<span class=\"prompt\">$:</span>"+
          "<span class=\"command\">Empty</span>"+
      "</p>";
    $("#query_result").html(result_str);
  }
}
</script>

<section class="quickstart">
  <div class="grid">
    <div class="unit code">
      <p class="title">&nbsp;</p>
      <div class="shell">
        <form class="line">
          <div class="input-append">
            <input class="query_input four-fifths" type="search" name="q" id="query_input" placeholder="Enter keywords..."/>
            <button class="query_btn one-fifths" type="button" id="query_btn">Search</button>
          </div>
        </form>
        <ul id="query_result" class="four-fifths">
        </ul>
      </div>
    </div>
    <div class="clear"></div>
  </div>
</section>